<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta name="renderer" content="webkit" />
    <meta name="force-rendering" content="webkit" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0, viewport-fit=cover" />
    <title>智能助理</title>
    <link rel="stylesheet" href="https://g.alicdn.com/code/npm/@ali/chatui-sdk/6.2.11/ChatSDK.css">
  </head>
  <body>
    <div id="root"></div>
    <script src="https://g.alicdn.com/code/npm/@ali/chatui-sdk/6.2.11/ChatSDK.js"></script>
    <script src="https://g.alicdn.com/code/npm/@ali/chatui-sdk/6.2.11/isvParser.js"></script>
    <script src="//g.alicdn.com/chatui/icons/2.0.2/index.js"></script>
    <script>
        var bot = new ChatSDK({
        config: {
            navbar: {
            title: '智能助理'
            },
            robot: {
            avatar: '//gw.alicdn.com/tfs/TB1U7FBiAT2gK0jSZPcXXcKkpXa-108-108.jpg'
            },
            messages: [
            {
                code: 'text',
                data: {
                text: '智能助理为您服务，请问有什么可以帮您？'
                }
            }
            ]
        },
        requests: {
            send: function (msg) {
            if (msg.type === 'text') {
                return {
                url: 'http://127.0.0.1:3000/ask',
                data: {
                    query: msg.content.text
                }
                };
            }
            }
        },
        handlers: {
            parseResponse: function (res, requestType) {
                return {
                    code: 'foundation-model',
                    data: {
                        answerReference: {
                            itemList: [
                                {
                                    content:
                                    '<p>阿里云官网链接是： https：//www.aliyun.com/ 或者是 https：//aliyun.com\n对话机器人 POC 环境地址是： http：//poc-console.alixiaomi.com：8081/\n</p>',
                                    contentType: 'RICH_TEXT',
                                    dataSource: 'doc',
                                    docName: '链接',
                                    number: 1,
                                    originNumber: 1,
                                    pagePos: [
                                    {
                                        height: 29,
                                        pageId: '1',
                                        width: 779,
                                        x: 203,
                                        y: 167,
                                    },
                                    ],
                                    pageUrls: [
                                    'http://beebot-private-cn-shanghai-daily.oss-cn-shanghai.aliyuncs.com/doc2bot/media/publicDocStructure/docmind-20231115-29bd8a89d2f04b50a4bed7dd14286b75/convert-00000.png?Expires=1700118022&OSSAccessKeyId=LTAIIKAwZRXpwYMT&Signature=dYaQzcYwHM6XYDBDw3ydVzjFYiw%3D',
                                    ],
                                    title: '链接',
                                    url: 'http://beebot-private-cn-shanghai-daily.oss-cn-shanghai.aliyuncs.com/doc2bot/2004/%E9%93%BE%E6%8E%A5.docx?Expires=1700118022&OSSAccessKeyId=LTAIIKAwZRXpwYMT&Signature=6gKSmodm4B%2BVqo8kQXi1UxlndQE%3D',
                                },
                            ],
                        },
                        content: res.data+"[1]",
                        sentenceList: [
                            {
                            content: res.data,
                            referNumber: 1,
                            },
                        ],
                        relatedQuestionList: [
                            { content: '测试关联问1' },
                            { content: '测试关联问2' },
                        ],
                        streamEnd: true,
                    }
                };
            }
        }
    });
        bot.run();
    </script>
  </body>
</html>